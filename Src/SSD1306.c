#include "SSD1306.h"
#include <cstring>
I2C_HandleTypeDef *_i2c;
uint16_t _address;
uint8_t _x, _y;
uint8_t displayBuffer[8][128]; //8 страниц по 128 столбцов

//TODO: Ўрифты в структуру
//TODO: »справить шрифт, некоторые символы некрасивые, кириллица и латиница разные по высоте
const uint8_t Lucida_Console_Latin9x12[] = {
	0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char  
	0x03, 0x00, 0x00, 0x00, 0x00, 0x7E, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char !
	0x05, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char "
	0x09, 0x00, 0x00, 0x40, 0x00, 0xD0, 0x03, 0x70, 0x00, 0xDE, 0x03, 0x70, 0x00, 0x5E, 0x00, 0x50, 0x00, 0x10, 0x00,  // Code for char #
	0x06, 0x00, 0x00, 0x1C, 0x02, 0x32, 0x02, 0xFF, 0x07, 0x62, 0x02, 0xC2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char $
	0x09, 0x00, 0x00, 0x0C, 0x02, 0x12, 0x01, 0x92, 0x00, 0x6C, 0x00, 0xB0, 0x01, 0x48, 0x02, 0x44, 0x02, 0x82, 0x01,  // Code for char %
	0x09, 0x00, 0x00, 0xC0, 0x01, 0x20, 0x03, 0x3C, 0x02, 0x32, 0x02, 0xD2, 0x02, 0x8C, 0x03, 0x80, 0x03, 0x60, 0x00,  // Code for char &
	0x03, 0x00, 0x00, 0x00, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char '
	0x06, 0x00, 0x00, 0xF8, 0x01, 0x0C, 0x03, 0x02, 0x04, 0x01, 0x08, 0x01, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char (
	0x06, 0x00, 0x00, 0x01, 0x08, 0x01, 0x08, 0x02, 0x04, 0x04, 0x02, 0xF8, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char )
	0x08, 0x00, 0x00, 0x40, 0x00, 0x50, 0x01, 0xA0, 0x00, 0x58, 0x03, 0xA0, 0x00, 0x50, 0x01, 0x40, 0x00, 0x00, 0x00,  // Code for char *
	0x08, 0x00, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0xF8, 0x03, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x00, 0x00,  // Code for char +
	0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x0B, 0x00, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char ,
	0x07, 0x00, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char -
	0x03, 0x00, 0x00, 0x00, 0x03, 0x00, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char .
	0x09, 0x00, 0x00, 0x00, 0x08, 0x00, 0x06, 0x00, 0x01, 0xC0, 0x00, 0x30, 0x00, 0x08, 0x00, 0x06, 0x00, 0x01, 0x00,  // Code for char /
	0x07, 0x00, 0x00, 0xF8, 0x00, 0x04, 0x03, 0x02, 0x02, 0x02, 0x02, 0x04, 0x03, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 0
	0x08, 0x00, 0x00, 0x04, 0x02, 0x04, 0x02, 0x02, 0x02, 0xFE, 0x03, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x00,  // Code for char 1
	0x06, 0x00, 0x00, 0x02, 0x03, 0x82, 0x02, 0x42, 0x02, 0x22, 0x02, 0x1C, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 2
	0x06, 0x00, 0x00, 0x02, 0x02, 0x22, 0x02, 0x22, 0x02, 0x52, 0x02, 0xCC, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 3
	0x07, 0x00, 0x00, 0xC0, 0x00, 0xA0, 0x00, 0x98, 0x00, 0x84, 0x00, 0xFE, 0x03, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 4
	0x05, 0x00, 0x00, 0x1E, 0x02, 0x12, 0x02, 0x12, 0x02, 0xE2, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 5
	0x07, 0x00, 0x00, 0xF8, 0x00, 0x24, 0x01, 0x12, 0x02, 0x12, 0x02, 0x12, 0x02, 0xE0, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char 6
	0x07, 0x00, 0x00, 0x02, 0x00, 0x02, 0x03, 0xC2, 0x00, 0x32, 0x00, 0x0A, 0x00, 0x06, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 7
	0x07, 0x00, 0x00, 0xCC, 0x01, 0x32, 0x02, 0x22, 0x02, 0x22, 0x02, 0x72, 0x02, 0xCC, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char 8
	0x07, 0x00, 0x00, 0x3C, 0x00, 0x42, 0x02, 0x42, 0x02, 0x42, 0x02, 0x24, 0x01, 0xF8, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 9
	0x04, 0x00, 0x00, 0x00, 0x00, 0x18, 0x03, 0x18, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char :
	0x04, 0x00, 0x00, 0x00, 0x00, 0x18, 0x0B, 0x18, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char ;
	0x07, 0x00, 0x00, 0x40, 0x00, 0x40, 0x00, 0xA0, 0x00, 0x10, 0x01, 0x10, 0x01, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char <
	0x07, 0x00, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0xA0, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char =
	0x07, 0x00, 0x00, 0x08, 0x02, 0x10, 0x01, 0x10, 0x01, 0xA0, 0x00, 0x40, 0x00, 0x40, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char >
	0x07, 0x00, 0x00, 0x06, 0x00, 0x02, 0x00, 0x42, 0x02, 0x22, 0x00, 0x12, 0x00, 0x0C, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char ?
	0x09, 0x00, 0x00, 0xF8, 0x00, 0x0C, 0x01, 0x76, 0x02, 0x9A, 0x02, 0x8A, 0x02, 0x4A, 0x03, 0xFC, 0x00, 0x80, 0x00,  // Code for char @
	0x09, 0x00, 0x00, 0x00, 0x02, 0x80, 0x01, 0xF0, 0x00, 0x8C, 0x00, 0x8C, 0x00, 0xF0, 0x00, 0x80, 0x01, 0x00, 0x02,  // Code for char A
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0xD8, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char B
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x00, 0x00,  // Code for char C
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char D
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x44, 0x02, 0x44, 0x02, 0x44, 0x02, 0x44, 0x02, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char E
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char F
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x04, 0x02, 0x44, 0x02, 0x44, 0x02, 0xC4, 0x03, 0x00, 0x00,  // Code for char G
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char H
	0x06, 0x00, 0x00, 0x04, 0x02, 0x04, 0x02, 0xFC, 0x03, 0x04, 0x02, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char I
	0x06, 0x00, 0x00, 0x00, 0x02, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0xFC, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char J
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x00, 0x60, 0x00, 0x90, 0x00, 0x08, 0x01, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char K
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char L
	0x08, 0x00, 0x00, 0xFC, 0x03, 0x0C, 0x00, 0x70, 0x00, 0x80, 0x00, 0x70, 0x00, 0x0C, 0x00, 0xFC, 0x03, 0x00, 0x00,  // Code for char M
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x08, 0x00, 0x30, 0x00, 0xC0, 0x00, 0x00, 0x01, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char N
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00,  // Code for char O
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char P
	0x09, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x08, 0x05, 0xF0, 0x0C, 0x00, 0x08,  // Code for char Q
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x44, 0x00, 0x44, 0x00, 0xC4, 0x00, 0x38, 0x01, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char R
	0x07, 0x00, 0x00, 0x18, 0x02, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0x44, 0x02, 0x84, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char S
	0x08, 0x00, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0xFC, 0x03, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x00, 0x00,  // Code for char T
	0x07, 0x00, 0x00, 0xFC, 0x01, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char U
	0x09, 0x00, 0x00, 0x04, 0x00, 0x38, 0x00, 0xC0, 0x01, 0x00, 0x03, 0x80, 0x01, 0x60, 0x00, 0x18, 0x00, 0x04, 0x00,  // Code for char V
	0x09, 0x00, 0x00, 0x1C, 0x00, 0xE0, 0x01, 0x80, 0x03, 0x70, 0x00, 0xE0, 0x00, 0x00, 0x03, 0xF0, 0x01, 0x0C, 0x00,  // Code for char W
	0x09, 0x00, 0x00, 0x04, 0x02, 0x08, 0x01, 0x90, 0x00, 0x60, 0x00, 0x60, 0x00, 0x90, 0x00, 0x08, 0x01, 0x04, 0x02,  // Code for char X
	0x08, 0x00, 0x00, 0x04, 0x00, 0x08, 0x00, 0x30, 0x00, 0xC0, 0x03, 0x30, 0x00, 0x08, 0x00, 0x04, 0x00, 0x00, 0x00,  // Code for char Y
	0x08, 0x00, 0x00, 0x04, 0x02, 0x04, 0x03, 0x84, 0x02, 0x44, 0x02, 0x24, 0x02, 0x14, 0x02, 0x0C, 0x02, 0x00, 0x00,  // Code for char Z
	0x06, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x0F, 0x01, 0x08, 0x01, 0x08, 0x01, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char [
	0x09, 0x00, 0x00, 0x01, 0x00, 0x06, 0x00, 0x08, 0x00, 0x30, 0x00, 0xC0, 0x00, 0x00, 0x01, 0x00, 0x06, 0x00, 0x08,  // Code for char BackSlash
	0x05, 0x00, 0x00, 0x01, 0x08, 0x01, 0x08, 0x01, 0x08, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char ]
	0x07, 0x00, 0x00, 0x80, 0x00, 0x60, 0x00, 0x18, 0x00, 0x0E, 0x00, 0x70, 0x00, 0x80, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char ^
	0x09, 0x00, 0x00, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04,  // Code for char _
	0x05, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x01, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char `
	0x07, 0x00, 0x00, 0x80, 0x01, 0x48, 0x02, 0x48, 0x02, 0x48, 0x02, 0xF0, 0x03, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char a
	0x07, 0x00, 0x00, 0xFF, 0x03, 0x10, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0xF0, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char b
	0x07, 0x00, 0x00, 0xE0, 0x00, 0x10, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char c
	0x07, 0x00, 0x00, 0xF0, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x10, 0x01, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char d
	0x07, 0x00, 0x00, 0xE0, 0x01, 0x58, 0x02, 0x48, 0x02, 0x48, 0x02, 0x48, 0x02, 0x70, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char e
	0x08, 0x00, 0x00, 0x08, 0x00, 0x08, 0x00, 0xFE, 0x03, 0x09, 0x00, 0x09, 0x00, 0x09, 0x00, 0x09, 0x00, 0x00, 0x00,  // Code for char f
	0x07, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x09, 0x08, 0x09, 0x08, 0x09, 0x90, 0x08, 0xF8, 0x07, 0x00, 0x00, 0x00, 0x00,  // Code for char g
	0x07, 0x00, 0x00, 0xFF, 0x03, 0x10, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0xF0, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char h
	0x05, 0x00, 0x00, 0x08, 0x00, 0x08, 0x00, 0x0B, 0x00, 0xFB, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char i
	0x05, 0x00, 0x00, 0x08, 0x08, 0x08, 0x08, 0x0B, 0x08, 0xFB, 0x07, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char j
	0x06, 0x00, 0x00, 0xFF, 0x03, 0x40, 0x00, 0xA0, 0x00, 0x10, 0x01, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char k
	0x05, 0x00, 0x00, 0x01, 0x00, 0x01, 0x00, 0x01, 0x00, 0xFF, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char l
	0x08, 0x00, 0x00, 0xF8, 0x03, 0x10, 0x00, 0x08, 0x00, 0xF8, 0x03, 0x10, 0x00, 0x08, 0x00, 0xF8, 0x03, 0x00, 0x00,  // Code for char m
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x10, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0xF0, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char n
	0x07, 0x00, 0x00, 0xF0, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0xF0, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char o
	0x07, 0x00, 0x00, 0xF8, 0x0F, 0x90, 0x00, 0x08, 0x01, 0x08, 0x01, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char p
	0x07, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x08, 0x01, 0x08, 0x01, 0x90, 0x00, 0xF8, 0x0F, 0x00, 0x00, 0x00, 0x00,  // Code for char q
	0x06, 0x00, 0x00, 0xF8, 0x03, 0x10, 0x00, 0x08, 0x00, 0x08, 0x00, 0x18, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char r
	0x06, 0x00, 0x00, 0x30, 0x02, 0x28, 0x02, 0x48, 0x02, 0x48, 0x02, 0x88, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char s
	0x07, 0x00, 0x00, 0x08, 0x00, 0x08, 0x00, 0xFC, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char t
	0x07, 0x00, 0x00, 0xF8, 0x01, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x01, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char u
	0x08, 0x00, 0x00, 0x08, 0x00, 0x70, 0x00, 0x80, 0x01, 0x00, 0x02, 0x80, 0x01, 0x70, 0x00, 0x08, 0x00, 0x00, 0x00,  // Code for char v
	0x09, 0x00, 0x00, 0x18, 0x00, 0xE0, 0x00, 0x80, 0x03, 0x70, 0x00, 0xE0, 0x00, 0x00, 0x03, 0xE0, 0x00, 0x18, 0x00,  // Code for char w
	0x07, 0x00, 0x00, 0x08, 0x02, 0x10, 0x01, 0xE0, 0x00, 0xE0, 0x00, 0x10, 0x01, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char x
	0x09, 0x00, 0x00, 0x08, 0x08, 0x30, 0x08, 0xC0, 0x0C, 0x00, 0x07, 0x00, 0x03, 0xC0, 0x00, 0x30, 0x00, 0x08, 0x00,  // Code for char y
	0x07, 0x00, 0x00, 0x08, 0x02, 0x08, 0x03, 0x88, 0x02, 0x48, 0x02, 0x28, 0x02, 0x18, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char z
	0x06, 0x00, 0x00, 0x20, 0x00, 0x20, 0x00, 0xDF, 0x07, 0x01, 0x08, 0x01, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char {
	0x04, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0xFF, 0x0F, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char |
	0x07, 0x00, 0x00, 0x00, 0x00, 0x01, 0x08, 0x01, 0x08, 0xDE, 0x07, 0x20, 0x00, 0x20, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char }
	0x09, 0x00, 0x00, 0x80, 0x00, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0x40, 0x00,  // Code for char ~
	0x03, 0x00, 0x00, 0xF8, 0x03, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00   // Code for char 
	};

const uint8_t Lucida_Console_Cyrillic_9x12[] = {
	0x09, 0x00, 0x00, 0x00, 0x02, 0x80, 0x01, 0xF0, 0x00, 0x8C, 0x00, 0x8C, 0x00, 0xF0, 0x00, 0x80, 0x01, 0x00, 0x02,  // Code for char 
	0x06, 0x00, 0x00, 0xFC, 0x03, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0xC4, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0xD8, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x08, 0x00, 0x00, 0x00, 0x0E, 0x80, 0x03, 0x7C, 0x02, 0x04, 0x02, 0x04, 0x02, 0xFC, 0x03, 0x00, 0x0E, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x44, 0x02, 0x44, 0x02, 0x44, 0x02, 0x44, 0x02, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x08, 0x00, 0x00, 0x04, 0x02, 0xD8, 0x01, 0x20, 0x00, 0xFC, 0x03, 0x20, 0x00, 0xD8, 0x01, 0x04, 0x02, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0x04, 0x02, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0x24, 0x02, 0xD8, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x01, 0xC0, 0x00, 0x30, 0x00, 0x08, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x01, 0x01, 0xC2, 0x00, 0x32, 0x00, 0x09, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x00, 0x20, 0x00, 0xD0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x08, 0x00, 0x00, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x01, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0xFC, 0x03, 0x00, 0x00,  // Code for char 
	0x08, 0x00, 0x00, 0xFC, 0x03, 0x0C, 0x00, 0x70, 0x00, 0x80, 0x00, 0x70, 0x00, 0x0C, 0x00, 0xFC, 0x03, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0x20, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char 
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x44, 0x00, 0x38, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char  
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x04, 0x02, 0x00, 0x00,  // Code for char !
	0x08, 0x00, 0x00, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0xFC, 0x03, 0x04, 0x00, 0x04, 0x00, 0x04, 0x00, 0x00, 0x00,  // Code for char "
	0x09, 0x00, 0x00, 0x04, 0x02, 0x18, 0x02, 0x60, 0x01, 0xC0, 0x01, 0x40, 0x00, 0x30, 0x00, 0x08, 0x00, 0x04, 0x00,  // Code for char #
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x08, 0x01, 0xFC, 0x03, 0x08, 0x01, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00,  // Code for char $
	0x09, 0x00, 0x00, 0x04, 0x02, 0x08, 0x01, 0x90, 0x00, 0x60, 0x00, 0x60, 0x00, 0x90, 0x00, 0x08, 0x01, 0x04, 0x02,  // Code for char %
	0x08, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x03, 0x00, 0x0E, 0x00, 0x00,  // Code for char &
	0x06, 0x00, 0x00, 0x3C, 0x00, 0x40, 0x00, 0x40, 0x00, 0x20, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char '
	0x08, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x03, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x03, 0x00, 0x00,  // Code for char (
	0x09, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x03, 0x00, 0x02, 0x00, 0x02, 0xFC, 0x03, 0x00, 0x0E,  // Code for char )
	0x08, 0x00, 0x00, 0x04, 0x00, 0x04, 0x00, 0xFC, 0x03, 0x20, 0x02, 0x20, 0x02, 0x20, 0x02, 0xC0, 0x01, 0x00, 0x00,  // Code for char *
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x02, 0x20, 0x02, 0xC0, 0x01, 0x00, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char +
	0x07, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x02, 0x20, 0x02, 0x20, 0x02, 0x20, 0x02, 0xC0, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char ,
	0x07, 0x00, 0x00, 0x04, 0x02, 0x04, 0x02, 0x24, 0x02, 0x24, 0x02, 0x28, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char -
	0x09, 0x00, 0x00, 0xFC, 0x03, 0x20, 0x00, 0xF8, 0x00, 0x0C, 0x03, 0x04, 0x02, 0x04, 0x02, 0x0C, 0x03, 0xF8, 0x01,  // Code for char .
	0x07, 0x00, 0x00, 0x00, 0x02, 0x38, 0x01, 0xC4, 0x00, 0x44, 0x00, 0x44, 0x00, 0xFC, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char /
	0x07, 0x00, 0x00, 0x80, 0x01, 0x48, 0x02, 0x48, 0x02, 0x48, 0x02, 0xF0, 0x03, 0x00, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char 0
	0x07, 0x00, 0x00, 0xFC, 0x00, 0x12, 0x03, 0x09, 0x02, 0x09, 0x02, 0x09, 0x02, 0xF0, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char 1
	0x06, 0x00, 0x00, 0xF8, 0x03, 0x48, 0x02, 0x48, 0x02, 0x48, 0x02, 0xB0, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 2
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 3
	0x09, 0x00, 0x00, 0x00, 0x0E, 0x80, 0x03, 0x78, 0x02, 0x08, 0x02, 0x08, 0x02, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x0E,  // Code for char 4
	0x07, 0x00, 0x00, 0xE0, 0x01, 0x58, 0x02, 0x48, 0x02, 0x48, 0x02, 0x48, 0x02, 0x70, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char 5
	0x08, 0x00, 0x00, 0x08, 0x02, 0xB0, 0x01, 0x40, 0x00, 0xF8, 0x03, 0xC0, 0x00, 0xB0, 0x01, 0x08, 0x02, 0x00, 0x00,  // Code for char 6
	0x06, 0x00, 0x00, 0x08, 0x02, 0x48, 0x02, 0x48, 0x02, 0x48, 0x02, 0xB8, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char 7
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x00, 0x01, 0xC0, 0x00, 0x20, 0x00, 0x10, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char 8
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x02, 0x01, 0xC4, 0x00, 0x24, 0x00, 0x12, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char 9
	0x06, 0x00, 0x00, 0xF8, 0x03, 0x40, 0x00, 0xA0, 0x00, 0x10, 0x01, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char :
	0x08, 0x00, 0x00, 0x00, 0x02, 0x00, 0x03, 0xF8, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0xF8, 0x03, 0x00, 0x00,  // Code for char ;
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x30, 0x00, 0x40, 0x00, 0x40, 0x00, 0x30, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char <
	0x06, 0x00, 0x00, 0xF8, 0x03, 0x40, 0x00, 0x40, 0x00, 0x40, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char =
	0x07, 0x00, 0x00, 0xF0, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0xF0, 0x01, 0x00, 0x00, 0x00, 0x00,  // Code for char >
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char ?
	0x07, 0x00, 0x00, 0xF8, 0x07, 0x90, 0x00, 0x08, 0x01, 0x08, 0x01, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char @
	0x07, 0x00, 0x00, 0xE0, 0x00, 0x10, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char A
	0x08, 0x00, 0x00, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0xF8, 0x03, 0x08, 0x00, 0x08, 0x00, 0x08, 0x00, 0x00, 0x00,  // Code for char B
	0x09, 0x00, 0x00, 0x08, 0x08, 0x30, 0x08, 0xC0, 0x04, 0x00, 0x07, 0x00, 0x03, 0xC0, 0x00, 0x30, 0x00, 0x08, 0x00,  // Code for char C
	0x08, 0x00, 0x00, 0xF0, 0x00, 0x08, 0x01, 0x08, 0x01, 0xFE, 0x0F, 0x08, 0x01, 0x08, 0x01, 0xF0, 0x00, 0x00, 0x00,  // Code for char D
	0x07, 0x00, 0x00, 0x08, 0x02, 0x10, 0x01, 0xE0, 0x00, 0xE0, 0x00, 0x10, 0x01, 0x08, 0x02, 0x00, 0x00, 0x00, 0x00,  // Code for char E
	0x08, 0x00, 0x00, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x02, 0x00, 0x02, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x0E, 0x00, 0x00,  // Code for char F
	0x06, 0x00, 0x00, 0x78, 0x00, 0x80, 0x00, 0x80, 0x00, 0x80, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char G
	0x08, 0x00, 0x00, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x02, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x02, 0xF8, 0x03, 0x00, 0x00,  // Code for char H
	0x09, 0x00, 0x00, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x02, 0xF8, 0x03, 0x00, 0x02, 0x00, 0x02, 0xF8, 0x03, 0x00, 0x0E,  // Code for char I
	0x08, 0x00, 0x00, 0x08, 0x00, 0x08, 0x00, 0xF8, 0x03, 0x40, 0x02, 0x40, 0x02, 0x40, 0x02, 0x80, 0x01, 0x00, 0x00,  // Code for char J
	0x07, 0x00, 0x00, 0xF8, 0x03, 0x40, 0x02, 0x40, 0x02, 0x80, 0x01, 0x00, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00,  // Code for char K
	0x06, 0x00, 0x00, 0xF8, 0x03, 0x40, 0x02, 0x40, 0x02, 0x40, 0x02, 0x80, 0x01, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char L
	0x07, 0x00, 0x00, 0x08, 0x02, 0x08, 0x02, 0x48, 0x02, 0x48, 0x02, 0x48, 0x01, 0xF0, 0x00, 0x00, 0x00, 0x00, 0x00,  // Code for char M
	0x09, 0x00, 0x00, 0xF8, 0x03, 0x40, 0x00, 0xF0, 0x01, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0x08, 0x02, 0xF0, 0x01,  // Code for char N
	0x07, 0x00, 0x00, 0x00, 0x02, 0x30, 0x01, 0xC8, 0x00, 0x48, 0x00, 0x48, 0x00, 0xF8, 0x03, 0x00, 0x00, 0x00, 0x00   // Code for char O
	};

/* ѕользовательские функции */		

//‘ункци€ инициализаци€ диспле€ 	
uint8_t OLED_init(I2C_HandleTypeDef *i2c, uint16_t address) {
	_i2c = i2c;
	_address = address;
	
	//ѕолучаем состо€ние устройства на шине
	uint8_t STATUS = HAL_I2C_IsDeviceReady(_i2c, _address, 5, 0xFF);
	//≈сли устройство не готово - возвращаемс€ с ошибкой
	if (STATUS != HAL_OK) {
		return STATUS;
	}
	//1. Set Display Off
	//__sendCommand(0xAE);
	//2. Set Osc Frequency
	__sendCommandWithData(0xD5, 0xF0); //Max
	//3. Set MUX Ratio (0xA8)
	__sendCommandWithData(0xA8,0x3F);
	//4. Set Display Offset
	__sendCommandWithData(0xD3, 0x00);
	//5. Set Display Start Line
	__sendCommand(0x40);
	//6. Enable charge pump regulator
	__sendCommandWithData(0x8D, 0x14);
	//7. Set Segment re-map. 0xA1 - left-to-right, 0xA0 - right-to-left
	__sendCommand(0xA1);
	//8. Set COM Output Scan Direction 0xC0 - down-to-up, 0xC8 - up-to-down
	__sendCommand(0xC8);
	//9. Set COM Pins hardware configuration
	__sendCommandWithData(0xDA, 0x12);
	//10. Set Contrast Control
	__sendCommandWithData(0x81, 0x7F);//127, half-brightness
	//11. Set Pre-Charge period
	__sendCommandWithData(0xD9, 0x22);
	//12. Set VCOMH Deselect Level
	__sendCommandWithData(0xDB, 0x30);
	//13. Disable Entire Display On
	__sendCommand(0xA4);
	//14. Set Normal Display
	__sendCommand(0xA6);
	//15. Clear Screen
	//16. Display On
	__sendCommand(0xAF);
	
	//”становка режма горизонтальной адресации
	__sendCommandWithData(0x20, 0x00);

	//end init

	return STATUS;
}

//‘ункци€ установки €ркости диспле€
void OLED_setBrightness(uint8_t brightness) {
	__sendCommandWithData(0x81, brightness);
}
//¬ключить/выключить дисплей
void OLED_display(uint8_t state) {
	__sendCommand(0xAE | state);
}
//¬ключить/выключить инверсию
void OLED_inversion(uint8_t state) {
	__sendCommand(0xA6 | state);
}

//‘ункци€ очистки экрана
void OLED_clear(void) {
	memset(displayBuffer, 0x00, 1024);
}
//‘ункци€ заполнени€ экрана
void OLED_fill(void) {
	memset(displayBuffer, 0xFF, 1024);
}
//‘ункци€ перемещени€ курсора
void OLED_goto(uint8_t x, uint8_t y) {
	_x = x;
	_y = y;
}
//‘ункци€ рисовани€ рисунка на экране
//TODO: ѕерегрузка функции
//TODO: »справить в режиме инверсии и непрозрачности задевание неиспользуемых битов
void OLED_draw(const uint8_t bitmap[], uint8_t length, uint8_t width, uint8_t inversion, uint8_t transparent) {
	uint8_t _length, _width; //–еальные значени€ размера отображаемого рисунка с коррекцией на то, сколько поместитс€ рисунка на экран
	//ѕроверка и коррекци€ длины и ширины рисунка 
	if ((length + _x) > (DISPLAY_LENGHT-1)) _length = DISPLAY_LENGHT-1-_x; else _length = length;
	if ((width + _y) > (DISPLAY_WIDTH-1)) _width = DISPLAY_WIDTH-1-_y; else _width = width;
	//ѕроверка чтобы скорректированные данные не были за пределами допустимого
	if (((_length == 0) || (_length > DISPLAY_LENGHT-1)) || (_width <= 0 || (_width > DISPLAY_WIDTH-1))) return;
	//¬ычисление количества страниц, которые займет рисунок
	uint8_t pages = _width/8;
	if (_width%8 > 0) pages++; //≈сли реальный размер не кратен 8, то кол-во страниц увеличиваетс€ на 1
	//ѕечать в буфер столбцов
	for (uint8_t page = 0; page < pages; page++) {
		for (uint8_t column = 0; column < _length; column++) {
			uint8_t bufferColumn = (displayBuffer[_y/8][_x]); //—толбец из буфера
			uint8_t bitmapColumn = bitmap[column+page*length]; //—толбец из битмепа
			if (inversion == ON) bitmapColumn ^= 0xFF; //»нвертирование

			if (inversion == AUTO) {
				bufferColumn ^= (bitmapColumn << (_y%8)); //јвтоинверси€ и смещение вниз столбца дл€ подгона по Y
			} else {
				if (transparent == OFF) bufferColumn &= (0xFF >> (8 - _y%8)); //ќчистка участка буфера если не включена прозрачность
				bufferColumn |= (bitmapColumn << (_y%8));
			}
			displayBuffer[_y/8][_x] = bufferColumn;
			
			//ƒопечатывание нижней части столбцов, если оно помещаетс€ на экран и если до этого было смещение столбца
			if ((_y+8 <= 63) & (_y%8 != 0)) {
				bufferColumn = (displayBuffer[_y/8+1][_x]); //—толбец из буфера с следующей страницы
				bitmapColumn = bitmap[column+page*length]; //—толбец из битмепа
				if (inversion == ON) bitmapColumn ^= 0xFF; //»нвертирование
				
				if (inversion == AUTO) {
					bufferColumn ^= (bitmapColumn >> (8-_y%8)); //јвтоинверси€ и смещение вниз столбца дл€ подгона по Y
				} else {
					if (transparent == OFF) bufferColumn &= (0xFF << (_y%8)); //ќчистка участка буфера если не включена прозрачность
					bufferColumn |= (bitmapColumn >> (8-_y%8));
				}
				displayBuffer[_y/8+1][_x] = bufferColumn; //—ложение верхней и нижней части
			}
			_x++;
		}
		//”величение Y после печати строчки стобцов
		_y += 8;
		//”меньшение X в начальное положение дл€ корректной печати следующей строчки
		_x -= _length;
	}
	// оррекци€ X и Y дл€ корректной печати следующего рисунка
	_y -= 8*pages;
	_x += _length;
}

//‘ункци€ отправки буфера на дисплей
void OLED_update(void) {
	__displayUpdate();
}
//‘ункци€ печати символа на дисплее
void OLED_printChar(unsigned char byte, uint8_t inversion, uint8_t transparent) {
	//TODO: ѕерегрузка функции
	//ѕечать латиницы или символов из ASCII
	if ((byte < 128) & (byte > 31)) {
		uint8_t font_lenght = 9;
		uint8_t font_width = 12;
		uint8_t bitmapLength = Lucida_Console_Latin9x12[(byte-32)*(font_lenght*2+1)]; //Ўирина символа
		uint8_t pages = font_width/8;
		if (font_width%8 > 0) pages++;
		
		uint8_t charBitmap[bitmapLength*pages];
		
		//”ебанский генератор шрифтов требует уебанских решений
		for (uint8_t page = 0; page < pages; page++) {
			for (uint8_t i = 0; i < bitmapLength; i++) {
				uint8_t bitmapIndex = page*bitmapLength+i;
				uint8_t fontIndex = 1+i*2+page;
				charBitmap[bitmapIndex] = Lucida_Console_Latin9x12[(byte-32)*(font_lenght*2+1)+fontIndex];
			}
		}
		OLED_draw(charBitmap, bitmapLength, font_width, inversion, transparent);
	}
	//ѕечать кириллицы
	if (byte >= 192) {
		uint8_t font_lenght = 9;
		uint8_t font_width = 12;
		uint8_t bitmapLength = Lucida_Console_Cyrillic_9x12[(byte-192)*(font_lenght*2+1)]; //Ўирина символа
		uint8_t pages = font_width/8;
		if (font_width%8 > 0) pages++;
		
		uint8_t charBitmap[bitmapLength*pages];
		
		//”ебанский генератор шрифтов требует уебанских решений
		for (uint8_t page = 0; page < pages; page++) {
			for (uint8_t i = 0; i < bitmapLength; i++) {
				uint8_t bitmapIndex = page*bitmapLength+i;
				uint8_t fontIndex = 1+i*2+page;
				charBitmap[bitmapIndex] = Lucida_Console_Cyrillic_9x12[(byte-192)*(font_lenght*2+1)+fontIndex];
			}
		}
		OLED_draw(charBitmap, bitmapLength, font_width, inversion, transparent);
	}
}
//‘ункци€ печати текста на экране
void OLED_print(char *text, uint8_t inversion, uint8_t transparent) {
	uint8_t i = 0;
	while(*text) {
		i = *text++;
		OLED_printChar(i, inversion, transparent);
	}		
}

/* —лужебные функции */

//‘ункци€ дл€ печати буфера на экране
static void __displayUpdate(void) {
	//”становка начального и конечного столбца
	uint8_t columns[6] = {0x80, 0x21, 0x80, 0, 0x80, 127};
	__transmitToDisplay(columns, 6);
	uint8_t pages[6] = {0x80, 0x22, 0x80, 0, 0x80, 7};
	__transmitToDisplay(pages, 6);
	for(uint8_t i = 0; i < 8; i++) {
		__sendDataArray(displayBuffer[i], 128);
	}
}
//‘ункци€ отправки одного байта данных
static uint8_t __sendData(uint8_t byte) {
	uint8_t i2c_buffer[2];
	i2c_buffer[0] = 0xC0;//we sending data
	i2c_buffer[1] = byte;
	return __transmitToDisplay(i2c_buffer, 2);
}
//‘ункци€ отправки массива данных
static uint8_t __sendDataArray(uint8_t bytes[], uint16_t size) {
	uint8_t i2c_buffer[size+1];
	i2c_buffer[0] = 0x40; //ћы отправл€ем массив данных
	for (uint16_t i = 1; i <= size; i++) {
		i2c_buffer[i] = bytes[i-1];
	}
	return __transmitToDisplay(i2c_buffer, size+1);
}
//‘ункци€ отправки команды
static uint8_t __sendCommand(uint8_t cmd) {
	uint8_t i2c_buffer[2];
	i2c_buffer[0] = 0x80; //we sending command
	i2c_buffer[1] = cmd;
	return 	__transmitToDisplay(i2c_buffer, 2);
}
//‘ункци€ отправки команды с данными
static uint8_t __sendCommandWithData(uint8_t cmd, uint8_t data) {
	uint8_t i2c_buffer[4];
	i2c_buffer[0] = 0x80; //we sending command
	i2c_buffer[1] = cmd;
	i2c_buffer[2] = 0x80; //we sending data after command
	i2c_buffer[3] = data;
	return __transmitToDisplay(i2c_buffer, 4);
}
//‘ункци€ отправки данных по шине I2C
static uint8_t __transmitToDisplay(uint8_t buff[], uint16_t size) {
	return HAL_I2C_Master_Transmit(_i2c, _address, buff, size, 0xFF);
}
